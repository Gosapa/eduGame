{% extends 'base.html' %}
{% block body %}
<div id="loading" class="flex items-center justify-center min-h-screen">
    <div class="animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-blue-500 opacity-75"></div>
    <p class="ml-4 text-lg font-bold text-gray-800">Loading...</p>
</div>
{% endblock body %}
{% block script %}
<script>
    async function generate_questions() {
        const endpointURL = "{% url 'game:generate_questions' game_id=game_id %}";
        try {
            const response = await fetch (endpointURL, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "X-CSRFToken": "{{ csrf_token }}",
                },
                body: JSON.stringify({}),
            });
            if (response.ok) {
                const data = await response.json();
                console.log(data);
                window.location.href = "{% url 'game:play_game' game_id=game_id %}"
            }else {
                console.error("Error creating game", response.status);
                console.log(response);
            }
        } catch (error) {
            console.error("Error occured", error);
        }
    }
    window.onload = async() => {
        await generate_questions();
    }
</script>
{% endblock script %}